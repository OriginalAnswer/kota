<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Forum&Bodoni+Moda&Gowun+Dodum&family=Jua&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./chat.css">
    <title>kota chat</title>
</head>
<body>
        <section class="chat">
            <div class="chats" id="chats">
                <div id="single-chat">
                    <div class="chat-name">도혁</div>
                    <div>
                        <span class="chat-text">다들 뭐하냐?</span>
                        <span class="chat-time">00:00</span>
                    </div>
                </div>
                <div id="single-chat">
                    <div class="chat-name">도혁</div>
                    <div>
                        <span class="chat-text">다들 뭐하냐?</span>
                        <span class="chat-time">00:00</span>
                    </div>
                </div>
                <div id="single-chat">
                    <div class="chat-name">도혁</div>
                    <div>
                        <span class="chat-text">다들 뭐하냐?</span>
                        <span class="chat-time">00:00</span>
                    </div>
                </div>
                <div id="single-chat">
                    <div class="chat-name">도혁</div>
                    <div>
                        <span class="chat-text">다들 뭐하냐?</span>
                        <span class="chat-time">00:00</span>
                    </div>
                </div>
            </div>
        </section>
        <section class="type">
            <form id="type-form">
                <input id="type-input" type="text" placeholder="type here..." required>
            </form>
        </section>

    <script type="text/javascript">
        const todoInput = document.querySelector('#todo-input');
        const todoForm = document.querySelector('#todo-form');
        const todoList = document.querySelector('#todo-list');

        const TODOS_KEY = 'check list';
        let todosArr = [];
        const savedTodo = localStorage.getItem(TODOS_KEY);
        
        if(savedTodo !== null){
            const parsedTodos = JSON.parse(savedTodo);
            todos = parsedTodos;
            todosArr = todos; //새로고침 해결부분!!!!
            parsedTodos.forEach(printTodo);
        }
        function saveTodo(){
            localStorage.setItem(TODOS_KEY, JSON.stringify(todosArr));
        }
        function deleteTodo(e){
            const li = event.target.parentElement;
            li.remove();
            todosArr = todosArr.filter(a => a.id !== parseInt(li.id));
            saveTodo();
        }
        function todoSubmit(e){
            e.preventDefault();
            const newtodo = todoInput.value;
            todoInput.value = "";
            const newtodoObj = {
                text:newtodo,
                id:Date.now(),
            }
            todosArr.push(newtodoObj);
            printTodo(newtodoObj);
            saveTodo();
        }
        
        function printTodo(n){
            const li = document.createElement('div');
            li.id = n.id;
            li.classList.add('li');
            const span = document.createElement('span');
            span.innerText = n.text;
            const btn = document.createElement('span');
            // btn.classList.add('fas', 'fa-times');
            btn.classList.add('delete-btn');
            btn.innerText = 'x';
            btn.addEventListener("click", deleteTodo);
            li.appendChild(span);
            li.appendChild(btn);
            todoList.appendChild(li);
        }

        todoForm.addEventListener('submit', todoSubmit);

        
    </script>
    <script src="https://kit.fontawesome.com/e4704dcbbd.js" crossorigin="anonymous"></script>
</body>
</html>
